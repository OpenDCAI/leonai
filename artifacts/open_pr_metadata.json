[{"body":"[proposer:hunter] minimal non-destructive ops change for Alibaba<->ZGC preview path.\n\n## Why\n- PR61/PR66 preview endpoints regress to Cloudflare 530/1033 when d9 tunnel process is not kept alive.\n- Current operator flow lacked a persistent runtime wrapper and compact health signature output.\n\n## What changed\n- Added `scripts/d9_preview_tunnel_runtime.sh` with `start|run|stop|status|health`.\n- Added restart-on-exit supervisor loop for `cloudflared` (local runtime only).\n- Added observability outputs: PID/state, restart count, log tails, host-level health signature.\n- Added runbook `docs/ops/d9_preview_tunnel_runtime.md`.\n- Added rollout note `docs/ops/d9_preview_tunnel_rollout_note.md` and execution artifacts.\n\n## Verification\n- `bash -n scripts/d9_preview_tunnel_runtime.sh`\n- `./scripts/d9_preview_tunnel_runtime.sh start`\n- `./scripts/d9_preview_tunnel_runtime.sh status`\n- `./scripts/d9_preview_tunnel_runtime.sh health` (fails loudly when non-200)\n- Screenshot captured with required command and committed artifact.\n\n## Risk\n- Low risk: only ops script/docs/artifacts; no backend/frontend production code path changes.\n","number":78,"title":"[proposer:hunter] d9 preview tunnel persistent runtime + observability","url":"https://github.com/OpenDCAI/leonai/pull/78"},{"body":"[proposer:taotao-db]\n\n## CP1 minimal implementation\n\nThis PR implements only the CP1 minimal coding slice from `docs/DB_ABSTRACTION_UNIFIED_FINAL.md`:\n\n- `core/storage/interfaces.py` (new)\n- `core/storage/sqlite/thread_metadata_repo.py` (new)\n- `core/storage/sqlite/__init__.py` (new)\n- `backend/web/utils/helpers.py` (metadata helper wiring only; signatures unchanged)\n- `tests/storage/test_thread_metadata_repo_sqlite.py` (new)\n- `tests/backend/web/test_thread_metadata_helpers_repo_parity.py` (new)\n\nBehavior notes:\n- No runtime DDL in metadata helper path.\n- No silent fallback in metadata helper/repo path; SQLite errors propagate (fail loud).\n\n## Test command + output evidence\n\n```bash\nuv run --with fastapi --with pytest pytest -q tests/storage/test_thread_metadata_repo_sqlite.py\n```\n\n```\n....                                                                     [100%]\n4 passed in 0.45s\n```\n\n```bash\nuv run --with fastapi --with pytest pytest -q tests/backend/web/test_thread_metadata_helpers_repo_parity.py\n```\n\n```\n...                                                                      [100%]\n3 passed in 0.50s\n```\n\nFull log file: `artifacts/tests/cp1-2026-02-22.txt`\n\n## Leon FE screenshot evidence\n\n- Screenshot URL: https://raw.githubusercontent.com/OpenDCAI/leonai/taotao/cp1-minimal-impl/artifacts/screenshots/leon-fe-cp1-2026-02-22.png\n- Absolute path: `/home/ubuntu/Aria/Projects/leonai/worktrees/desks/taotao-db-cp1-pr/artifacts/screenshots/leon-fe-cp1-2026-02-22.png`\n- Exact command:\n  - `node /home/ubuntu/codex-smoke/tools/webshot.mjs http://127.0.0.1:5272/ /home/ubuntu/Aria/Projects/leonai/worktrees/desks/taotao-db-cp1-pr/artifacts/screenshots/leon-fe-cp1-2026-02-22.png`\n- Command output:\n  - `screenshot_saved=/home/ubuntu/Aria/Projects/leonai/worktrees/desks/taotao-db-cp1-pr/artifacts/screenshots/leon-fe-cp1-2026-02-22.png`\n\n## Self-review\n\nI reviewed this patch against CP1 boundaries and confirm it is intentionally minimal: one protocol, one SQLite repo, metadata helper wiring only, and focused tests for repo behavior + helper parity + fail-loud semantics.\n","number":74,"title":"[proposer:taotao-db] CP1 minimal: thread metadata sqlite seam","url":"https://github.com/OpenDCAI/leonai/pull/74"},{"body":"## Summary\n- fail startup loudly when configured non-local sandbox provider SDK modules are missing\n- reconcile thread delete cleanup manager with sandbox DB provider when thread metadata/provider key drifts\n- add focused regression tests for both startup dependency parity and delete-thread provider mismatch\n\n## Scope\n- `backend/web/requirements.txt`\n- `backend/web/services/sandbox_service.py`\n- `backend/web/core/lifespan.py`\n- `tests/test_backend_startup_delete_hardening.py`\n\n## Validation\n- `uv run pytest -q tests/test_backend_startup_delete_hardening.py`\n- Result: `2 passed in 0.55s`\n\n## Frontend Screenshot\n- Screenshot reference: `artifacts/night-watch/hunter-pr-ready-20260222T103338Z.png`\n- Screenshot URL: https://github.com/OpenDCAI/leonai/blob/hunter/pr-dependency-parity-hardening/artifacts/night-watch/hunter-pr-ready-20260222T103338Z.png\n- Absolute artifact path: `/home/ubuntu/Aria/Projects/leonai/worktrees/desks/hunter-pr-ready/artifacts/night-watch/hunter-pr-ready-20260222T103338Z.png`\n- Exact command: `node /home/ubuntu/codex-smoke/tools/webshot.mjs http://127.0.0.1:5272/ /home/ubuntu/Aria/Projects/leonai/worktrees/desks/hunter-pr-ready/artifacts/night-watch/hunter-pr-ready-20260222T103338Z.png`\n\n## Self-review\n- Self-review: I reviewed the diff and test coverage in this PR; changes are minimal and scoped, and no extra fallback behavior was introduced.\n","number":70,"title":"[proposer:hunter] backend/web: dependency parity hardening for startup + delete","url":"https://github.com/OpenDCAI/leonai/pull/70"}]
